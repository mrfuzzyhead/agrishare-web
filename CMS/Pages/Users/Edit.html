
<div ng-controller="FormViewController" ag-title="User" ag-selected-url="#/users/list" ag-api-route="/cms/users/">

    <ag-title-bar></ag-title-bar>

    <ag-section ag-controller="form">

        <form>

            <h2>Personal Details</h2>
            <div flex>
                <gl-textbox gl-label="First name" ng-model="form.entity.FirstName" gl-required="true"></gl-textbox>
                <gl-textbox gl-label="Last name" ng-model="form.entity.LastName" gl-required="true"></gl-textbox>
            </div>
            <div flex>
                <gl-date gl-label="Date of birth" ng-model="form.entity.DateOfBirth"></gl-date>
                <gl-dropdown-list gl-label="Gender" ng-model="form.entity.GenderId" gl-source="form.data.Genders" gl-selection="Id"></gl-dropdown-list>
            </div>
            <div flex>
                <gl-dropdown-list gl-label="Region" ng-model="form.entity.Region" gl-source="form.data.Regions"></gl-dropdown-list>
                <gl-dropdown-list gl-label="Language" ng-model="form.entity.LanguageId" gl-source="form.data.Languages" gl-selection="Id"></gl-dropdown-list>
            </div>

            <h2>Contact Details</h2>
            <div flex>
                <gl-textbox gl-label="Email Address" ng-model="form.entity.EmailAddress"></gl-textbox>
                <gl-textbox gl-label="Telephone" ng-model="form.entity.Telephone" gl-required="true"></gl-textbox>
            </div>

            <h2>Payment</h2>
            <gl-checkbox-list gl-label="Method" ng-model="form.entity.PaymentMethods" gl-source="form.data.PaymentMethods" gl-selection="Id"></gl-checkbox-list>
            <div flex ng-if="form.entity.PaymentMethods.includes(2)">
                <gl-textbox gl-label="Bank" ng-model="form.entity.BankAccount.Bank"></gl-textbox>
                <gl-textbox gl-label="Branch" ng-model="form.entity.BankAccount.Branch"></gl-textbox>
            </div>
            <div flex ng-if="form.entity.PaymentMethods.includes(2)">
                <gl-textbox gl-label="Account Name" ng-model="form.entity.BankAccount.AccountName"></gl-textbox>
                <gl-textbox gl-label="Account Number" ng-model="form.entity.BankAccount.AccountNumber"></gl-textbox>
            </div>

            <h2>Access Control</h2>
            <gl-textbox gl-label="PIN" ng-model="form.entity.ClearPassword" ng-if="form.entity.Id==0" gl-type="password"></gl-textbox>
            <gl-checkbox-list gl-label="Roles" ng-model="form.entity.Roles" gl-source="form.data.Roles" gl-required="true" gl-selection="Id"></gl-checkbox-list>

            <gl-dropdown-list gl-label="Status" ng-model="form.entity.StatusId" gl-source="form.data.Statuses" gl-selection="Id"></gl-dropdown-list>
            <div flex>
                <gl-dropdown-list gl-label="Agent" ng-model="form.entity.Agent" gl-source="form.data.Agents"></gl-dropdown-list>
                <gl-dropdown-list gl-label="Agent Type" ng-model="form.entity.AgentTypeId" gl-source="form.data.Types" gl-selection="Id" ng-if="form.entity.Agent"></gl-dropdown-list>
            </div>

            <gl-dropdown-list gl-label="Supplier" ng-model="form.entity.Supplier" gl-source="form.data.Suppliers"></gl-dropdown-list>

        </form>

    </ag-section>

    <ag-status-bar>

        <gl-icon-button ng-click="form.save()" class="accent" ng-disabled="EditForm.$invalid || form.busy" ng-if="form.entity">Save</gl-icon-button>

    </ag-status-bar>

</div>