
<div ng-controller="DetailViewController" ag-title="User" ag-selected-url="#/users/list" ag-api-route="/cms/users/">

    <ag-title-bar></ag-title-bar>

    <ag-section ag-controller="detail">

        <div class="detail-view">

            <div class="box">

                <div class="header">
                    <div>
                        <strong>{{detail.entity.FirstName}} {{detail.entity.LastName}}</strong><br />
                        <gl-icon-label gl-icon="business" ng-if="detail.entity.Company">{{detail.entity.Company.Title}}</gl-icon-label>
                    </div>
                </div>

                <ul class="details">
                    <li ng-show="detail.entity.Gender">
                        <strong>Gender</strong>
                        <span>{{detail.entity.Gender}}</span>
                    </li>
                    <li ng-show="detail.entity.DateOfBirth">
                        <strong>Date of Birth</strong>
                        <span>{{detail.entity.DateOfBirth | date : 'd MMMM yyyy'}}</span>
                    </li>
                </ul>

            </div>

            <div class="box">
                <h2>Contact Details</h2>
                <ul class="details">
                    <li>
                        <strong>Status</strong>
                        <span>{{detail.entity.Status}}</span>
                    </li>
                    <li ng-if="detail.entity.StatusId!==2">
                        <strong>OTP Requests</strong>
                        <span>{{detail.entity.OtpRequests}}</span>
                    </li>
                    <li ng-show="detail.entity.Telephone">
                        <strong>Telephone</strong>
                        <span><gl-autolink gl-type="tel" ng-model="detail.entity.Telephone"></gl-autolink></span>
                    </li>
                    <li ng-show="detail.entity.EmailAddress">
                        <strong>Email Address</strong>
                        <span><gl-autolink gl-type="mail" ng-model="detail.entity.EmailAddress"></gl-autolink></span>
                    </li>
                </ul>
                <div style="background: #eee; padding: 20px; text-align: right" ng-if="detail.entity.StatusId!==2">
                    <gl-icon-button gl-icon="check" class="border" ng-click="detail.async('/cms/users/verify?id='+detail.entity.Id)">Verify Account</gl-icon-button>
                </div>
            </div>

            <div class="box">
                <h2>Payment Methods</h2>
                <ul class="details">
                    <li>
                        <strong>Cash</strong>
                        <span ng-show="detail.entity.PaymentMethods.includes(1)"><i class="material-icons" style="color:green">check</i></span>
                        <span ng-hide="detail.entity.PaymentMethods.includes(1)"><i class="material-icons" style="color:gray">cancel</i></span>
                    </li>
                    <li>
                        <strong>Bank Transfer</strong>
                        <span ng-show="detail.entity.PaymentMethods.includes(2)"><i class="material-icons" style="color:green">check</i></span>
                        <span ng-hide="detail.entity.PaymentMethods.includes(2)"><i class="material-icons" style="color:gray">cancel</i></span>
                    </li>
                </ul>
            </div>

            <div class="box" ng-if="detail.entity.BankAccount.AccountNumber">
                <h2>Bank Account</h2>
                <ul class="details">
                    <li>
                        <strong>Bank</strong>
                        <span>{{detail.entity.BankAccount.Bank}}</span>
                    </li>
                    <li>
                        <strong>Branch</strong>
                        <span>{{detail.entity.BankAccount.Branch}}</span>
                    </li>
                    <li>
                        <strong>Account Name</strong>
                        <span>{{detail.entity.BankAccount.AccountName}}</span>
                    </li>
                    <li>
                        <strong>Account Number</strong>
                        <span>{{detail.entity.BankAccount.AccountNumber}}</span>
                    </li>
                </ul>
            </div>

            <div class="box" ng-if="detail.entity.VerificationCode">
                <h2>Verification</h2>
                <ul class="details">
                    <li>
                        <strong>Code</strong>
                        <span>{{detail.entity.VerificationCode || 'N/A'}}</span>
                    </li>
                    <li>
                        <strong>Expiry</strong>
                        <span>{{detail.entity.VerificationCodeExpiry || 'N/A' | date : 'd MMMM yyyy h:mma'}}</span>
                    </li>
                </ul>
            </div>

            <div class="box">
                <h2>Referral</h2>
                <ul class="details">
                    <li ng-if="detail.entity.AgentName">
                        <strong>Agent Name</strong>
                        <span>{{detail.entity.AgentName}}</span>
                    </li>
                    <li ng-if="detail.data.ReferredBy">
                        <strong>Referred By</strong>
                        <span>{{detail.data.ReferredBy}}</span>
                    </li>
                    <li>
                        <strong>Referral Code</strong>
                        <span>{{detail.entity.ReferralCode}}</span>
                    </li>
                    <li>
                        <strong>Referral Count</strong>
                        <span>{{detail.entity.ReferralCount | number}}</span>
                    </li>
                </ul>
            </div>

            <div class="box">
                <h2>Advanced</h2>
                <ul class="details">
                    <li>
                        <strong>Failed Login Count</strong>
                        <span>{{detail.entity.FailedLoginAttempts}}</span>
                        <i class="material-icons" ng-click="detail.async('/cms/users/failedloginattempts/reset?id='+detail.entity.Id)" style="cursor: pointer">refresh</i>
                    </li>
                    <li>
                        <strong>Failed Voucher Count</strong>
                        <span>{{detail.entity.FailedVoucherAttempts}}</span>
                        <i class="material-icons" ng-click="detail.async('/cms/users/failedvoucherattempts/reset?id='+detail.entity.Id)" style="cursor: pointer">refresh</i>
                    </li>
                    <li>
                        <strong>Failed OTP Count</strong>
                        <span>{{detail.entity.FailedOtpAttempts}}</span>
                        <i class="material-icons" ng-click="detail.async('/cms/users/failedotpattempts/reset?id='+detail.entity.Id)" style="cursor: pointer">refresh</i>
                    </li>
                </ul>
            </div>

        </div>

</ag-section>

    <ag-status-bar></ag-status-bar>

</div>