
<div ng-controller="DetailViewController" ag-title="Message" ag-selected-url="#/messages/list" ag-api-route="/cms/messages">

    <ag-title-bar></ag-title-bar>

    <ag-section ag-controller="detail">

        <div class="detail-view message-view">

            <div class="box">

                <div class="header">
                    <div>
                        <strong>{{detail.entity.Title}}</strong>
                    </div>
                </div>

                <div class="box">

                    <ul class="details">
                        <li>
                            <strong>Name</strong>
                            <span>{{detail.entity.Name}}</span>
                        </li>
                        <li>
                            <strong>Telephone</strong>
                            <span>{{detail.entity.Telephone || '-'}}</span>
                        </li>
                        <li>
                            <strong>Email</strong>
                            <span>{{detail.entity.EmailAddress || '-'}}</span>
                        </li>
                    </ul>

                </div>

                <div class="message">
                    <div class="sender">
                        <strong>{{detail.entity.Name}}</strong> <small>{{detail.entity.DateCreated | date : 'd MMMM yyyy h:mma'}}</small>
                    </div>
                    <div>{{detail.entity.Content}}</div>
                </div>

                <div class="message reply" ng-repeat="item in detail.data.Thread">
                    <div class="sender">
                        <strong>{{item.Name}}</strong> <small>{{item.DateCreated | date : 'd MMMM yyyy h:mma'}}</small>
                    </div>
                    <div>{{item.Content}}</div>
                </div>

            </div>

            <div class="post-reply">
                <h2>Post a reply</h2>
                <gl-textarea ng-model="detail.data.Reply.Content" gl-required></gl-textarea>
                <gl-icon-button class="wide border" ng-click="detail.post('/cms/messages/reply', detail.data.Reply)">Send</gl-icon-button>
            </div>
        </div>

    </ag-section>

    <ag-status-bar></ag-status-bar>
</div>
