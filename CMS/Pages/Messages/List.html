
<div ng-controller="ListViewController" ag-title="Messages" ag-selected-url="#/messages/list" ag-api-route="/cms/messages/">

    <ag-title-bar>

        <ag-title-bar-search ag-controller="list"></ag-title-bar-search>

        <gl-popup-menu gl-position="top right" class="responsive">
            <gl-menu-item gl-icon="search" ng-click="list.showSearch()">Search</gl-menu-item>
            <gl-menu-item gl-icon="refresh" gl-label-optional="true" ng-click="list.refresh()">Refresh</gl-menu-item>
        </gl-popup-menu>

    </ag-title-bar>

    <ag-section ag-controller="list">

        <gl-list gl-controller="list" gl-infinite="list.next()">
            <div ng-repeat="item in list.data">
                <icon ng-class="{'message-read':item.Status==='Read'}">
                    <i class="material-icons" ng-if="item.Status==='Unread'">mail</i>
                    <i class="material-icons" ng-if="item.Status==='Read'">mail_outline</i>
                </icon>
                <row class="message" ng-click="app.go('/messages/detail/'+item.Id+'?'+app.returnUrlQs())">
                    <div>
                        <strong>{{item.Title}}</strong><br/>
                        <small>{{item.Name}}</small>
                    </div>
                    <div>
                        <em>{{item.Date | date : 'd MMMM yyyy h:mma'}}</em><br/>
                        <em class="status outline" ng-if="item.ReplyCount">{{item.ReplyCount + 1}}</em>
                    </div>
                </row>
            </div>
        </gl-list>

    </ag-section>

    <ag-status-bar></ag-status-bar>

</div>